"use strict";!function(t){t.fn.MailChimpForm=function(r){function e(r,e,n,o){t.ajax({url:r,dataType:"jsonp",contentType:"application/json",data:e,success:n,error:o})}function n(t){t.preventDefault(),t.stopPropagation()}function o(t=""){let r=[];return t.split(",").map(t=>t.trim()).forEach(t=>{if(!t.includes(":"))throw new Error(`${t} should be in format: 0:FIELD1...`);let[e,n]=t.split(":");r[e]=n}),r}return this.each(function(){function i(t,r){r?(u[r].$errorEl.text(t),u[r].$inputEl.trigger("mc:input:error")):f.onFail(t)}function l(){for(let t in u){let r=u[t];r.$errorEl.text().length&&(r.$errorEl.text(""),r.$inputEl.trigger("mc:input:ok"))}}function c(){let t={};for(let r in u){let e=u[r];t[e.name]=e.$inputEl.val()}return t}let u={},s=t(this),f=t.extend({url:s.attr("action"),fields:"",inputSelector:"input",errorSelector:".mc-error",submitSelector:"",onFail:function(t){console.error(t)},onOk:function(t){console.log(t)}},r),p=o(f.fields),a=t(f.submitSelector);if(!f.url)throw new Error("Url must be specified!");p.map((t,r)=>{let e=s.find(`.mc-form-group-${t}`);u[r]={name:t,$inputEl:e.find(f.inputSelector),$errorEl:e.find(f.errorSelector)}}),a.on("click",function(t){n(t),l(),e(f.url.replace("/post?","/post-json?").concat("&c=?"),c(),function(t){if("error"===t.result){let r,e=t.msg;if(e.substr(1,4).indexOf("-")>=0){let n=t.msg.split("-").map(t=>t.trim());r=n[0],e=n[1]}i(e,r)}else"success"===t.result&&f.onOk(t.msg)},function(t){f.onFail("MailChip error occurred")})})})}}(jQuery);