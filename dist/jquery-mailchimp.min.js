!function(r){"use strict";r.fn.MailChimpForm=function(t){function e(t,e,n,o){r.ajax({url:t,dataType:"jsonp",contentType:"application/json",data:e,success:n,error:o})}function n(r){r.preventDefault(),r.stopPropagation()}return this.each(function(){function o(r,t){t?(c[t].$errorEl.text(r),c[t].$inputEl.trigger("mc:input:error")):s.onFail(r)}function i(){for(let r in c)c[r].$errorEl.text("")}function l(){let r={};for(let t in c){let e=c[t];r[e.name]=e.$inputEl.val()}return r}let c={},u=r(this),s=r.extend({url:u.attr("action"),fields:"",errorSelector:".mc-error",submitSelector:"",onFail:function(r){console.error(r)},onOk:function(r){console.log(r)}},t),f=s.fields.split(",").map(r=>r.trim()),a=r(s.submitSelector);if(!s.url)throw new Error("Url must be specified!");f.map((r,t)=>{let e=u.find(`.mc-form-group-${r}`);c[t]={name:r,$inputEl:e.find("input"),$errorEl:e.find(s.errorSelector)}}),a.on("click",function(r){n(r),i(),e(s.url.replace("/post?","/post-json?").concat("&c=?"),l(),function(r){if("error"===r.result){let t,e=r.msg;if(e.substr(1,4).indexOf("-")>=0){let n=r.msg.split("-").map(r=>r.trim());t=n[0],e=n[1]}o(e,t)}else"success"===r.result&&s.onOk(r.msg)},function(r){s.onFail("MailChip error occurred")})})})}}(jQuery);