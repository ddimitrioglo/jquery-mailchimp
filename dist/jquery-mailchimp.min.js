/* jquery-mailchimp@v1.2.0 [2018-04-16T15:17:16.113Z] */
!function(e){"use strict";function t(t,i,r,s){e.ajax({url:t,dataType:"jsonp",contentType:"application/json",data:i,success:r,error:s})}function i(e){e.preventDefault(),e.stopPropagation()}function r(e=""){let t=[];return e.split(",").map(e=>e.trim()).forEach(e=>{if(!e.includes(":"))throw new Error(`${e} should be in format: 0:FIELD1`);let[i,r]=e.split(":");t[i]=r}),t}function s(e,t={}){this.inputId=NaN,this.message=e.msg,this.isError="error"===e.result,this.mapping={E001:/^Please enter a value/i,E002:/^Please enter the date/i,E003:/^An email address must contain a single/i,E004:/^The domain portion of the email address is invalid/i,E005:/^Too many subscribe attempts for this email address/i,S001:/^Almost finished... We need to confirm your email/i};let i=this.message.match(/^(\d+)\s?-\s?(.*)$/);return i&&(this.inputId=parseInt(i[1]),this.message=i[2]),this.code=Object.keys(this.mapping).find(e=>this.mapping[e].test(this.message))||"UNCAUGHT","UNCAUGHT"===this.code&&(console.warn("If you see this message, please open an issue (https://github.com/ddimitrioglo/jquery-mailchimp/issues) with details below"),console.warn(e)),{input:this.inputId,message:t[this.code]?t[this.code]:this.message,isError:this.isError}}e.fn.MailChimpForm=function(n){return this.each(function(){function o(){for(let e in l){let t=l[e];t.$errorEl.text().length&&(t.$errorEl.text(""),t.$inputEl.trigger("mc:input:ok"))}}function a(){let e={};for(let t in l){let i=l[t];e[i.name]=i.$inputEl.val()}return e}let l={},u=e(this),c=e.extend({url:u.attr("action"),fields:"",inputSelector:"input",errorSelector:".mc-error",submitSelector:"",customMessages:{},onFail:e=>{console.error(e)},onOk:e=>{console.log(e)}},n),p=r(c.fields),m=e(c.submitSelector);if(!c.url)throw new Error("Url must be specified!");p.map((e,t)=>{let i=u.find(`.mc-form-group-${e}`);l[t]={name:e,$inputEl:i.find(c.inputSelector),$errorEl:i.find(c.errorSelector)}}),m.on("click",function(e){i(e),o(),t(c.url.replace("/post?","/post-json?").concat("&c=?"),a(),function(e){const t=new s(e,c.customMessages);t.isError&&!isNaN(t.input)?(l[t.input].$errorEl.text(t.message),l[t.input].$inputEl.trigger("mc:input:error")):t.isError&&isNaN(t.input)?c.onFail(t.message):c.onOk(t.message)},function(e){c.onFail("MailChip error occurred")})})})}}(jQuery);
