!function(t){"use strict";t.fn.MailChimpForm=function(r){function e(r,e,n,o){t.ajax({url:r,dataType:"jsonp",contentType:"application/json",data:e,success:n,error:o})}function n(t){t.preventDefault(),t.stopPropagation()}return this.each(function(){function o(t,r){r?(c[r].$errorEl.text(t),c[r].$inputEl.trigger("mc:input:error")):s.onFail(t)}function i(){for(let t in c){let r=c[t];r.$errorEl.text().length&&(r.$errorEl.text(""),r.$inputEl.trigger("mc:input:ok"))}}function l(){let t={};for(let r in c){let e=c[r];t[e.name]=e.$inputEl.val()}return t}let c={},u=t(this),s=t.extend({url:u.attr("action"),fields:"",inputSelector:"input",errorSelector:".mc-error",submitSelector:"",onFail:function(t){console.error(t)},onOk:function(t){console.log(t)}},r),p=s.fields.split(",").map(t=>t.trim()),f=t(s.submitSelector);if(!s.url)throw new Error("Url must be specified!");p.map((t,r)=>{let e=u.find(`.mc-form-group-${t}`);c[r]={name:t,$inputEl:e.find(s.inputSelector),$errorEl:e.find(s.errorSelector)}}),f.on("click",function(t){n(t),i(),e(s.url.replace("/post?","/post-json?").concat("&c=?"),l(),function(t){if("error"===t.result){let r,e=t.msg;if(e.substr(1,4).indexOf("-")>=0){let n=t.msg.split("-").map(t=>t.trim());r=n[0],e=n[1]}o(e,r)}else"success"===t.result&&s.onOk(t.msg)},function(t){s.onFail("MailChip error occurred")})})})}}(jQuery);